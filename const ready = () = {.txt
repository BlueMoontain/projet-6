const ready = () => {
  if (document.readyState !== 'loading') {
    init();
  } else {
    document.addEventListener('DOMContentLoaded', fn);
  }
};

const init = () => {
  const myBooksDiv = document.getElementById('myBooks');
  const newBookTitle = myBooksDiv.querySelector('h2');

  const addBookButton = document.createElement('button');
  addBookButton.textContent = 'Ajouter un livre';
  addBookButton.addEventListener('click', toggleFormVisibility); // Utiliser la fonction pour basculer la visibilit√©
  addBookButton.id = 'addBookButton';
  newBookTitle.after(addBookButton);

  const form = document.createElement('form');
  form.id = 'bookForm';

  const inputTitle = document.createElement('input');
  inputTitle.setAttribute('type', 'text');
  inputTitle.setAttribute('placeholder', 'Titre du livre');
  inputTitle.id = 'inputTitle';

  const inputAuthor = document.createElement('input');
  inputAuthor.setAttribute('type', 'text');
  inputAuthor.setAttribute('placeholder', 'Auteur');
  inputAuthor.id = 'inputAuthor';

  const submitButton = document.createElement('button');
  submitButton.setAttribute('type', 'submit');
  submitButton.textContent = 'Enregistrer';
  submitButton.id = 'submitButton';

  form.appendChild(inputTitle);
  form.appendChild(inputAuthor);
  form.appendChild(submitButton);

  newBookTitle.after(form);
  form.style.display = 'none'; // Cacher le formulaire au chargement initial

  form.addEventListener('submit', function (event) {
    event.preventDefault();

    const titleValue = document.getElementById('inputTitle').value;
    const authorValue = document.getElementById('inputAuthor').value;

    console.log('Titre du livre :', titleValue);
    console.log('Auteur :', authorValue);

    form.reset();
  });

  function toggleFormVisibility() {
    form.style.display = form.style.display === 'none' ? 'block' : 'none';
    addBookButton.style.display = form.style.display === 'none' ? 'block' : 'none';
  }
}

ready();